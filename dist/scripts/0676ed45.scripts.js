"use strict";angular.module("orderMeApp",["ngRoute","ngAnimate","angular-flash.service","angular-flash.flash-alert-directive"]).config(["$routeProvider","$locationProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/restaurants",{templateUrl:"views/restaurants/restaurants.html",controller:"RestaurantsCtrl"}).when("/orders",{templateUrl:"views/orders/orders.html",controller:"OrdersCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("orderMeApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);var app=angular.module("orderMeApp").controller("RestaurantsCtrl",["$scope","$store","flash",function(a,b,c){b.bind(a,"restaurants"),a.restaurants=b.get("restaurants"),a.newRestaurant={},a.defaults=function(){a.restaurants=[{id:1,name:"Burger King",phone:"1234567890",mail:"info@burgerking.com"},{id:2,name:"Pizza Hut",phone:"1432567890",mail:"info@pizzahut.com"},{id:3,name:"KFC",phone:"1234509876",mail:"info@kfc.com"},{id:4,name:"Chili's",phone:"6543217890",mail:"info@chilis.com"},{id:5,name:"Cook Door",phone:"6789012345",mail:"info@cookdoor.com"}],c.success="Restaurants store reseted to defaults successfully."},b.get("restaurants")||a.defaults();var d=function(){return a.restaurants.length+1};a.save=function(){if(null===a.newRestaurant.id)a.newRestaurant.id=d(),a.restaurants.push(a.newRestaurant),c.success=a.newRestaurant.name+" was created successfully.";else for(var b in a.restaurants)a.restaurants[b].id===a.newRestaurant.id&&(a.restaurants[b]=a.newRestaurant,c.success=a.newRestaurant.name+" was updated successfully.");document.getElementById("restaurant-form").modal("hide"),a.newRestaurant={}},a.edit=function(b){for(var c in a.restaurants)a.restaurants[c].id==b&&(a.newRestaurant=angular.copy(a.restaurants[c]))},a.destroy=function(b){var d=a.restaurants.splice(b,1);c.success=d[0].name+" was deleted successfully."}}]);angular.module("orderMeApp").controller("OrdersCtrl",["$scope","$store","flash",function(a,b,c){a.orders=b.get("orders"),a.restaurants=b.get("restaurants"),b.bind(a,"orders"),b.bind(a,"restaurants"),a.orders||(a.orders=[]);var d=function(){return a.orders.length+1};a.save=function(){a.newOrder.id=d(),a.newOrder.date=new Date,a.orders.push(a.newOrder),c.success="New order was placed successfully."},a.reorder=function(b){a.newOrder={},a.newOrder.reorder=!0,a.newOrder.restaurant=b.restaurant,a.newOrder.details=b.details,a.orderForm.$setDirty()}}]),angular.module("orderMeApp").factory("$store",function(){var a=window.localStorage,b={set:function(b,c){a.setItem(b,JSON.stringify(c))},get:function(b){return JSON.parse(a.getItem(b,[]))},bind:function(a,c){a.$watch(c,function(a){b.set(c,a)},!0)}};return b});